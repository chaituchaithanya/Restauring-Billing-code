<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ShopCart — Full Demo</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* small helpers */
    .glass { background: rgba(255,255,255,0.6); backdrop-filter: blur(6px); }
    .fade { transition: all .25s ease; }
  </style>
</head>
<body class="bg-gray-50 text-gray-800">
  <!-- NAVBAR -->
  <nav class="bg-white shadow sticky top-0 z-40">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
      <div class="flex items-center gap-4">
        <h1 class="text-2xl font-bold">ShopCart</h1>
        <div class="hidden md:flex items-center gap-2">
          <input id="search" type="search" placeholder="Search products..." class="border rounded px-3 py-1" />
          <select id="categoryFilter" class="border rounded px-2 py-1">
            <option value="all">All Categories</option>
          </select>
        </div>
      </div>

      <div class="flex items-center gap-3">
        <button id="loginBtn" class="px-3 py-1 border rounded">Login / Signup</button>
        <button id="cartBtn" class="px-3 py-1 bg-blue-600 text-white rounded">Cart (<span id="cartCount">0</span>)</button>
      </div>
    </div>
  </nav>

  <!-- HERO / SLIDER -->
  <section class="max-w-6xl mx-auto mt-6 px-4">
    <div class="relative overflow-hidden rounded-lg">
      <div id="slides" class="h-56 md:h-80 flex transition-transform duration-500"></div>
      <div class="absolute left-4 top-1/2 -translate-y-1/2">
        <button id="prevSlide" class="bg-white/80 rounded-full p-2">‹</button>
      </div>
      <div class="absolute right-4 top-1/2 -translate-y-1/2">
        <button id="nextSlide" class="bg-white/80 rounded-full p-2">›</button>
      </div>
    </div>
  </section>

  <!-- MAIN LAYOUT -->
  <main class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-4 gap-6 px-4 mt-6">
    <!-- LEFT: Filters -->
    <aside class="lg:col-span-1 glass p-4 rounded">
      <h3 class="font-semibold mb-2">Filters</h3>
      <label class="block text-sm">Price (max):</label>
      <input id="priceMax" type="range" min="0" max="5000" value="5000" class="w-full" />
      <p class="text-sm">Up to ₹<span id="priceVal">5000</span></p>

      <h4 class="mt-4 font-medium">Categories</h4>
      <div id="categoryList" class="space-y-1 mt-2"></div>

      <button id="clearFilters" class="mt-4 bg-red-500 text-white px-3 py-1 rounded">Clear Filters</button>
    </aside>

    <!-- RIGHT: Products -->
    <section class="lg:col-span-3">
      <div class="flex justify-between items-center mb-4">
        <h2 class="text-xl font-semibold">Products</h2>
        <div class="md:hidden">
          <input id="searchMobile" type="search" placeholder="Search..." class="border rounded px-2 py-1" />
        </div>
      </div>

      <div id="productList" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"></div>

      <div class="mt-6 flex justify-end">
        <button id="checkoutBtn" class="bg-green-600 text-white px-4 py-2 rounded">Proceed to Checkout</button>
      </div>
    </section>
  </main>

  <!-- Modals: Cart, Product, Auth -->
  <div id="cartModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center p-4">
    <div class="bg-white rounded-lg w-full max-w-md p-4">
      <div class="flex justify-between items-center mb-2">
        <h3 class="font-semibold">Your Cart</h3>
        <button id="closeCart">✕</button>
      </div>
      <div id="cartItems" class="space-y-2 max-h-64 overflow-auto"></div>
      <div class="mt-4 flex justify-between items-center">
        <strong>Total: ₹<span id="cartTotal">0</span></strong>
        <button id="checkoutModalBtn" class="bg-blue-600 text-white px-3 py-1 rounded">Checkout</button>
      </div>
    </div>
  </div>

  <div id="productModal" class="hidden fixed inset-0 bg-black/40 flex items-center justify-center p-4">
    <div class="bg-white rounded-lg w-full max-w-2xl p-4 grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <img id="pmImg" src="" alt="" class="w-full h-64 object-cover rounded" />
      </div>
      <div>
        <h3 id="pmTitle" class="text-xl font-semibold"></h3>
        <p id="pmPrice" class="text-lg text-green-700 mt-1"></p>
        <p id="pmDesc" class="mt-2 text-sm text-gray-600"></p>
        <div class="mt-4 flex gap-2">
          <input id="pmQty" type="number" min="1" value="1" class="w-20 border rounded px-2 py-1" />
          <button id="pmAdd" class="bg-blue-600 text-white px-3 py-1 rounded">Add to Cart</button>
          <button id="pmClose" class="border px-3 py-1 rounded">Close</button>
        </div>
      </div>
    </div>
  </div>

  <div id="authModal" class="hidden fixed inset-0 bg-black/40 flex items-center justify-center p-4">
    <div class="bg-white rounded-lg w-full max-w-md p-4">
      <div class="flex gap-4 mb-4">
        <button id="showLogin" class="flex-1 py-2 bg-blue-600 text-white rounded">Login</button>
        <button id="showSignup" class="flex-1 py-2 border rounded">Signup</button>
      </div>
      <form id="authForm" class="space-y-2">
        <input id="authName" placeholder="Name (signup)" class="w-full border rounded px-2 py-1 hidden" />
        <input id="authEmail" type="email" placeholder="Email" class="w-full border rounded px-2 py-1" required />
        <input id="authPass" type="password" placeholder="Password" class="w-full border rounded px-2 py-1" required />
        <div class="flex justify-end gap-2">
          <button type="button" id="authCancel" class="px-3 py-1 border rounded">Cancel</button>
          <button type="submit" class="px-3 py-1 bg-blue-600 text-white rounded">Submit</button>
        </div>
      </form>
    </div>
  </div>

  <!-- SCRIPTS -->
  <script>
    /* =======================
       Demo data & state
       ========================*/
    const products = [
      { id:1, name:'Smart Watch', price:1999, category:'Wearables', img:'https://picsum.photos/seed/p1/600/400', desc:'Stylish smart watch with health tracking.'},
      { id:2, name:'Bluetooth Earbuds', price:1299, category:'Audio', img:'https://picsum.photos/seed/p2/600/400', desc:'Noise-cancelling true wireless earbuds.'},
      { id:3, name:'Wireless Mouse', price:699, category:'Accessories', img:'https://picsum.photos/seed/p3/600/400', desc:'Ergonomic wireless mouse.'},
      { id:4, name:'Gaming Keyboard', price:2599, category:'Accessories', img:'https://picsum.photos/seed/p4/600/400', desc:'RGB mechanical keyboard.'},
      { id:5, name:'Smartphone', price:14999, category:'Mobiles', img:'https://picsum.photos/seed/p5/600/400', desc:'Flagship killer with great camera.'},
      { id:6, name:'Laptop Sleeve', price:799, category:'Accessories', img:'https://picsum.photos/seed/p6/600/400', desc:'Protective and stylish sleeve.'},
    ];

    let state = {
      cart: JSON.parse(localStorage.getItem('cart_v1')||'[]'),
      user: JSON.parse(localStorage.getItem('user_v1')||'null'),
      slides: [
        {img:'https://picsum.photos/1200/400?random=11', title:'Latest Deals'},
        {img:'https://picsum.photos/1200/400?random=12', title:'Free Shipping'},
        {img:'https://picsum.photos/1200/400?random=13', title:'New Arrivals'},
      ],
      slideIndex:0,
      filters: { q:'', category:'all', priceMax:5000 }
    };

    /* =======================
       Utilities
       ========================*/
    const $ = id=>document.getElementById(id);
    function saveCart(){ localStorage.setItem('cart_v1', JSON.stringify(state.cart)); }
    function saveUser(){ localStorage.setItem('user_v1', JSON.stringify(state.user)); }

    /* =======================
       Renderers
       ========================*/
    function renderSlides(){
      const slides = $('slides');
      slides.innerHTML = '';
      state.slides.forEach(s=>{
        const div = document.createElement('div');
        div.style.minWidth = '100%';
        div.innerHTML = `<div class="h-56 md:h-80 bg-cover bg-center" style="background-image:url('${s.img}')"></div>`;
        slides.appendChild(div);
      });
      updateSlidePos();
    }
    function updateSlidePos(){
      const slides = $('slides');
      slides.style.transform = `translateX(-${state.slideIndex*100}%)`;
    }

    function renderCategories(){
      const cats = Array.from(new Set(products.map(p=>p.category)));
      const catFilter = $('categoryFilter');
      catFilter.innerHTML = '<option value="all">All Categories</option>' + cats.map(c=>`<option value="${c}">${c}</option>`).join('');
      const catList = $('categoryList');
      catList.innerHTML = cats.map(c=>`<label class=\"flex items-center gap-2\"><input type=\"checkbox\" data-cat=\"${c}\" class=\"catChk\" checked /> <span>${c}</span></label>`).join('');
    }

    function renderProducts(){
      const list = $('productList');
      const q = state.filters.q.toLowerCase();
      const cat = state.filters.category;
      const priceMax = state.filters.priceMax;
      list.innerHTML = '';
      products.filter(p=>{
        if(cat!=='all' && p.category!==cat) return false;
        if(p.price>priceMax) return false;
        if(q && !p.name.toLowerCase().includes(q) && !p.desc.toLowerCase().includes(q)) return false;
        return true;
      }).forEach(p=>{
        const card = document.createElement('div');
        card.className = 'bg-white rounded shadow p-3';
        card.innerHTML = `
          <img src="${p.img}" alt="${p.name}" class="w-full h-40 object-cover rounded cursor-pointer" data-id="${p.id}" />
          <h4 class="mt-2 font-medium">${p.name}</h4>
          <p class="text-sm text-gray-600">${p.category}</p>
          <div class="mt-2 flex items-center justify-between">
            <strong>₹${p.price}</strong>
            <div class="flex gap-2">
              <button class="text-sm border px-2 py-1 rounded" data-details="${p.id}">Details</button>
              <button class="text-sm bg-blue-600 text-white px-2 py-1 rounded" data-add="${p.id}">Add</button>
            </div>
          </div>
        `;
        list.appendChild(card);
      });
    }

    function renderCart(){
      $('cartCount').textContent = state.cart.reduce((s,i)=>s+i.qty,0);
      const items = $('cartItems'); items.innerHTML = '';
      let total = 0;
      state.cart.forEach(ci=>{
        total += ci.qty*ci.price;
        const el = document.createElement('div');
        el.className = 'flex justify-between items-center';
        el.innerHTML = `<div><b>${ci.name}</b><div class=\"text-sm text-gray-600\">₹${ci.price} x ${ci.qty}</div></div>
          <div class=\"flex gap-2\"><button class=\"border px-2 py-1\" data-dec=\"${ci.id}\">-</button><button class=\"border px-2 py-1\" data-inc=\"${ci.id}\">+</button><button class=\"text-red-600 ml-2\" data-rem=\"${ci.id}\">Remove</button></div>`;
        items.appendChild(el);
      });
      $('cartTotal').textContent = total;
      saveCart();
    }

    /* =======================
       Actions
       ========================*/
    function addToCartId(id, qty=1){
      const p = products.find(x=>x.id===id);
      const existing = state.cart.find(c=>c.id===id);
      if(existing) existing.qty += qty; else state.cart.push({...p, qty});
      renderCart();
    }
    function removeFromCart(id){ state.cart = state.cart.filter(c=>c.id!==id); renderCart(); }
    function changeQty(id, delta){ const item = state.cart.find(c=>c.id===id); if(!item) return; item.qty = Math.max(1, item.qty+delta); renderCart(); }

    /* =======================
       Event bindings
       ========================*/
    // Basic UI hooks
    document.addEventListener('click', e=>{
      if(e.target.matches('[data-add]')) addToCartId(+e.target.getAttribute('data-add'));
      if(e.target.matches('[data-details]')) openProductModal(+e.target.getAttribute('data-details'));
      if(e.target.matches('[data-id]')) openProductModal(+e.target.getAttribute('data-id'));
      if(e.target.matches('[data-inc]')) changeQty(+e.target.getAttribute('data-inc'), +1);
      if(e.target.matches('[data-dec]')) changeQty(+e.target.getAttribute('data-dec'), -1);
      if(e.target.matches('[data-rem]')) removeFromCart(+e.target.getAttribute('data-rem'));
    });

    // Cart modal
    $('cartBtn').addEventListener('click', ()=>$('cartModal').classList.remove('hidden'));
    $('closeCart').addEventListener('click', ()=>$('cartModal').classList.add('hidden'));
    $('checkoutModalBtn').addEventListener('click', ()=>{ $('cartModal').classList.add('hidden'); $('checkoutBtn').click(); });

    // Product modal
    function openProductModal(id){
      const p = products.find(x=>x.id===id);
      if(!p) return;
      $('pmImg').src = p.img; $('pmTitle').textContent = p.name; $('pmPrice').textContent = '₹'+p.price; $('pmDesc').textContent = p.desc; $('pmQty').value = 1;
      $('productModal').classList.remove('hidden');
      $('pmAdd').onclick = ()=>{ addToCartId(p.id, +$('pmQty').value); $('productModal').classList.add('hidden'); };
      $('pmClose').onclick = ()=>$('productModal').classList.add('hidden');
    }

    // Auth modal
    $('loginBtn').addEventListener('click', ()=>$('authModal').classList.remove('hidden'));
    $('authCancel').addEventListener('click', ()=>$('authModal').classList.add('hidden'));
    let isSignup = false;
    $('showLogin').addEventListener('click', ()=>{ isSignup=false; $('authName').classList.add('hidden'); });
    $('showSignup').addEventListener('click', ()=>{ isSignup=true; $('authName').classList.remove('hidden'); });

    $('authForm').addEventListener('submit', e=>{
      e.preventDefault();
      const email = $('authEmail').value.trim(); const pass = $('authPass').value;
      if(isSignup){
        const name = $('authName').value.trim();
        // Simple signup (only in localStorage for demo)
        let users = JSON.parse(localStorage.getItem('users_v1')||'[]');
        if(users.find(u=>u.email===email)){ alert('Email already registered'); return; }
        users.push({name,email,pass}); localStorage.setItem('users_v1', JSON.stringify(users));
        state.user = {name,email}; saveUser(); alert('Signup successful'); $('authModal').classList.add('hidden');
      } else {
        let users = JSON.parse(localStorage.getItem('users_v1')||'[]');
        const u = users.find(u=>u.email===email && u.pass===pass);
        if(!u){ alert('Invalid credentials'); return; }
        state.user = {name:u.name,email:u.email}; saveUser(); alert('Login successful'); $('authModal').classList.add('hidden');
      }
    });

    // Search & filters
    $('search').addEventListener('input', e=>{ state.filters.q = e.target.value; renderProducts(); });
    $('searchMobile').addEventListener('input', e=>{ state.filters.q = e.target.value; renderProducts(); });
    $('categoryFilter').addEventListener('change', e=>{ state.filters.category = e.target.value; renderProducts(); });
    document.addEventListener('input', e=>{ if(e.target.id==='priceMax'){ state.filters.priceMax = +e.target.value; $('priceVal').textContent = e.target.value; renderProducts(); } });
    $('clearFilters').addEventListener('click', ()=>{ state.filters={q:'',category:'all',priceMax:5000}; $('search').value=''; $('searchMobile').value=''; $('priceMax').value=5000; $('priceVal').textContent=5000; $('categoryFilter').value='all'; renderProducts(); });

    // Product image click opens details

    // Slides controls
    $('nextSlide').addEventListener('click', ()=>{ state.slideIndex = (state.slideIndex+1)%state.slides.length; updateSlidePos(); });
    $('prevSlide').addEventListener('click', ()=>{ state.slideIndex = (state.slideIndex-1+state.slides.length)%state.slides.length; updateSlidePos(); });
    setInterval(()=>{ state.slideIndex = (state.slideIndex+1)%state.slides.length; updateSlidePos(); }, 5000);

    // Checkout (demo)
    $('checkoutBtn').addEventListener('click', ()=>{
      if(state.cart.length===0){ alert('Cart empty'); return; }
      if(!state.user){ if(!confirm('You are not logged in. Continue as guest?')) return; }
      // Demo: POST to a backend endpoint (not implemented here)
      const order = { items: state.cart, total: state.cart.reduce((s,i)=>s+i.qty*i.price,0), user: state.user };
      // IMPORTANT: Replace the URL below with your real backend or Firebase Cloud Function endpoint.
      fetch('/api/checkout',{ method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify(order) })
        .then(r=>{ if(r.ok) return r.json(); throw new Error('Network'); })
        .then(data=>{ alert('Order placed (demo). Order id: '+(data.id||'demo')); state.cart=[]; renderCart(); })
        .catch(err=>{ console.warn(err); alert('Demo checkout: simulated success. See console for details.'); console.log('Order payload:', order); state.cart=[]; renderCart(); });
    });

    /* =======================
       Init
       ========================*/
    function init(){ renderSlides(); renderCategories(); renderProducts(); renderCart(); }
    init();

    /* =======================
       Developer notes (README in comments)

       - Persistence: cart and user are stored in localStorage (keys cart_v1, user_v1, users_v1).
       - Backend: For a real app, implement endpoints for products, auth, checkout.
         Example Node/Express skeleton:

           const express = require('express');
           const app = express();
           app.use(express.json());
           app.post('/api/checkout', (req,res)=>{ // handle payment, save order
             // ...
             res.json({id: 'order_' + Date.now()});
           });

       - Firebase: you can replace the checkout POST with a Firebase Cloud Function or use Firestore + Firebase Auth.
         Example (high-level):
           import { getAuth, createUserWithEmailAndPassword } from 'firebase/auth';
           // and Firestore to save orders

       - Deploy: To deploy static frontend quickly, push this file to GitHub and enable GitHub Pages (Settings -> Pages) or host on Netlify/Vercel.
         If you need, I can generate the deployment steps and a sample GitHub Actions file.

       ======================== */

  </script>
</body>
</html>
